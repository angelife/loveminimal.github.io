<!DOCTYPE html>
<html lang="zh">
  <head>
    <!-- 2021-02-23 Tue 11:12 -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Virtual DOM</title>
    <meta name="generator" content="Org mode">
    <meta name="author" content="Jack Liu">
    <link rel="shortcut icon" href="/themes/assets/rose-red.png" type="image/x-icon" />
    <link rel="stylesheet" href="/themes/style.css" type="text/css"  />
    <script type="module" src="/themes/main.js" defer></script>
  </head>
  <body>
    <div id="content">
      <h1 class="title">Virtual DOM</h1>
      <div id="table-of-contents">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents">
          <ul>
            <li><a href="#org672d331">What, exactly, is the DOM?</a>
              <ul>
                <li><a href="#org6d1846f">How is a web page built?</a></li>
                <li><a href="#org780256b">How is the DOM created?</a></li>
                <li><a href="#org1df31af">What the DOM is not</a></li>
                <li><a href="#org1f53352">Recap</a></li>
              </ul>
            </li>
            <li><a href="#org1c8b69f">Understanding the Critical Rendering Path</a>
              <ul>
                <li><a href="#org9d4e563">1.Constructing the DOM Tree</a></li>
                <li><a href="#org9283849">2.Constructing the CSSOM Tree</a></li>
                <li><a href="#org71e1c38">3.Running JavaScript</a></li>
                <li><a href="#org1c0e35c">4.Creating the Render Tree</a></li>
                <li><a href="#orgda78bad">5.Generating the Layout</a></li>
                <li><a href="#org88cd726">6.Painting</a></li>
                <li><a href="#orgccee9b8">Putting it All Together</a></li>
              </ul>
            </li>
            <li><a href="#orgf3b7c83">Understanding the Virtual DOM</a>
              <ul>
                <li><a href="#org0fb382a">Why do we need a virtual DOM?</a></li>
                <li><a href="#org3dd5165">What does a virtual DOM look like?</a></li>
                <li><a href="#org6ed4e62">Under the hood of the virtual DOM</a></li>
                <li><a href="#org03dd4e7">The virtual DOM and frameworks</a></li>
                <li><a href="#org1b0f244">The DOM vs the virtual DOM</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <p>
        Before learning Virtual DOM, lets take a look at DOM.
      </p>

      <div id="outline-container-org672d331" class="outline-2">
        <h2 id="org672d331">What, exactly, is the DOM?<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup></h2>
        <div class="outline-text-2" id="text-org672d331">
          <p>
            The Document Object Model, or the "DOM", is an interface to web pages. It is essentially an API to the page, allowing programs to read an manipulate the page's content, structure, and styles. Let'w break this down.
          </p>
        </div>

        <div id="outline-container-org6d1846f" class="outline-3">
          <h3 id="org6d1846f">How is a web page built?</h3>
          <div class="outline-text-3" id="text-org6d1846f">
            <p>
              How a browser goes from a source HTML document to displaying a styled and interactive page in the viewport is called the <b>"Critical Rendering Path"</b>. Although this process can be broken down into several steps, as I cover in my article on <a href="https://bitsofco.de/understanding-the-critical-rendering-path/">Understanding the Critical Rendering Path</a>, these steps can be roughy grouped into two stages.
            </p>

            <p>
              The first stage involves the browser parsing the document to determine what will ultimately be rendered on the page, and the second stage involves the browser performing the render.
            </p>

            <img
              src="/images/vdom-1.png"
              width="660"
              height=""
              style=""
              title=""
              />

            <p>
              The result of the first stage is what is called a <b>"render tree"</b>.
            </p>

            <p>
              The render tree is a representation of the HTML elements that will be rendered on the page and their related styles. In order to build this tree, the browser needs two things:
            </p>
            <ol class="org-ol">
              <li>The <b>CSSOM</b>, a representation of the styles associated with elements;</li>
              <li>The <b>DOM</b>, a representation of the elements.</li>
            </ol>
          </div>
        </div>

        <div id="outline-container-org780256b" class="outline-3">
          <h3 id="org780256b">How is the DOM created?</h3>
          <div class="outline-text-3" id="text-org780256b">
            <img
              src="/images/vdom-2.png"
              width="300"
              height=""
              style="float: right; margin-left: 8px;"
              title=""
              />

            <p>
              And what does it look like?
            </p>

            <p>
              The DOM is an object-based representation of the source HTML document. It has some differences, as we will see below, but it is essentially an attempt to convert the structure and content of the HTML document into an object model that can be used by various programs.
            </p>

            <p>
              The object structure of the DOM is represented by what is called a <b>"node tree"</b>. It is so called because it can be thought of as a tree with a single parent stem that branches out into several child branches, each which may have leaves. In this case, the parent "stem" is the root <code>&lt;html&gt;</code> element, the child "branches" are the nested elements, and the "leaves" are the content within the elements.
            </p>

            <p>
              Let's take this HTML document as an example:
            </p>

            <div class="org-src-container">
              <pre class="src src-html"><span class="linenr"> 1: </span><span style="color: #50a14f;">&lt;!doctype html&gt;</span>
                <span class="linenr"> 2: </span>&lt;<span style="color: #a626a4;">html</span> <span style="color: #6a1868;">lang</span>=<span style="color: #50a14f;">"en"</span>&gt;
                <span class="linenr"> 3: </span> &lt;<span style="color: #a626a4;">head</span>&gt;
                <span class="linenr"> 4: </span>   &lt;<span style="color: #a626a4;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">My first web page</span>&lt;/<span style="color: #a626a4;">title</span>&gt;
                <span class="linenr"> 5: </span>  &lt;/<span style="color: #a626a4;">head</span>&gt;
                <span class="linenr"> 6: </span> &lt;<span style="color: #a626a4;">body</span>&gt;
                <span class="linenr"> 7: </span>    &lt;<span style="color: #a626a4;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Hello, world!</span>&lt;/<span style="color: #a626a4;">h1</span>&gt;
                <span class="linenr"> 8: </span>    &lt;<span style="color: #a626a4;">p</span>&gt;How are you?&lt;/<span style="color: #a626a4;">p</span>&gt;
                <span class="linenr"> 9: </span>  &lt;/<span style="color: #a626a4;">body</span>&gt;
                <span class="linenr">10: </span>&lt;/<span style="color: #a626a4;">html</span>&gt;
              </pre>
            </div>

            <p>
              This document can be represented as the above node tree.
            </p>
          </div>
        </div>

        <div id="outline-container-org1df31af" class="outline-3">
          <h3 id="org1df31af">What the DOM is not</h3>
          <div class="outline-text-3" id="text-org1df31af">
            <p>
              In the example I gabe above, it seems like the DOM is a 1-to-1 mapping of the source HTML document or what you see your DevTools. However, as I mentioned, there are differences. In order to fully understand what the DOM <b>is</b>, we need to look at what it is <b>not</b>.
            </p>

            <p>
              <b>1.The DOM is not your source HTML</b>
            </p>

            <p>
              Although the DOM is created from the source HTML document, it is not always exactly the same. There are two instances in which the DOm can be different from the source HTML.
            </p>

            <p>
              (1) When the HTML is not valid
            </p>

            <p>
              The DOM is an interface for <b>valid</b> HTML documents. During the process of creating the DOM, the browser may correct some invalidities in the HTML code. Like this:
            </p>

            <div class="org-src-container">
              <pre class="src src-html"><span class="linenr">1: </span><span style="color: #50a14f;">&lt;!doctype html&gt;</span>
                <span class="linenr">2: </span>&lt;<span style="color: #a626a4;">html</span>&gt;
                <span class="linenr">3: </span>  Hello, world!
                <span class="linenr">4: </span>&lt;/<span style="color: #a626a4;">html</span>&gt;
              </pre>
            </div>

            <img
              src="/images/vdom-3.png"
              width="200"
              height=""
              style="float: right; margin-left: 8px;"
              title=""
              />

            <p>
              The document is missing a <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code> element, which is a requirement for valid HTML. If we look at the resulting DOM tree, we will see that this has been corrected:
            </p>

            <p>
              (2) When the DOM is modified by JavaScript
            </p>

            <p>
              Beside being an interface to viewing the content of an HTML document, the DOM can alse modified, making it a living resource.
            </p>

            <p>
              We can, for example, crate additional nodes to the DOM using JavaScript.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr">1: </span><span style="color: #e45649;">var</span> <span style="color: #6a1868;">newParagraph</span> = document.crateElement<span style="color: #4078f2;">(</span><span style="color: #50a14f;">'p'</span><span style="color: #4078f2;">)</span>
                <span class="linenr">2: </span><span style="color: #e45649;">var</span> <span style="color: #6a1868;">paragraphContent</span> = document.createTextNode<span style="color: #4078f2;">(</span><span style="color: #50a14f;">'I\'m new!'</span><span style="color: #4078f2;">)</span>
                <span class="linenr">3: </span>
                <span class="linenr">4: </span>newParagraph.appendChild<span style="color: #4078f2;">(</span>paragraphContent<span style="color: #4078f2;">)</span>
                <span class="linenr">5: </span>document.body.appendChild<span style="color: #4078f2;">(</span>newParagraph<span style="color: #4078f2;">)</span>
              </pre>
            </div>

            <p>
              This will update the DOM, but of course not our HTML document.
            </p>

            <p>
              <b>2.The DOM is not what you see in the browser (i.e., the render tree)</b>
            </p>

            <p>
              What you see in the browser viewport is the render tree which, as I mentioned, is a combination of the DOM and the CSSOM.
            </p>

            <p>
              What really separates the <b>DOM</b> from the <b>render tree</b>, is that the latter only consists of what will eventually be painted on the screen.
            </p>

            <p>
              Becuase the render tree is only concerned with what is rendered, it excludes elements that are visually hidden. For example, elements that have <code>display: none</code> styles associated to them.
            </p>

            <div class="org-src-container">
              <pre class="src src-html"><span class="linenr">1: </span><span style="color: #50a14f;">&lt;!doctype html&gt;</span>
                <span class="linenr">2: </span>&lt;<span style="color: #a626a4;">html</span> <span style="color: #6a1868;">lang</span>=<span style="color: #50a14f;">"en"</span>&gt;
                <span class="linenr">3: </span>  &lt;<span style="color: #a626a4;">head</span>&gt;&lt;/<span style="color: #a626a4;">head</span>&gt;
                <span class="linenr">4: </span>  &lt;<span style="color: #a626a4;">body</span>&gt;
                <span class="linenr">5: </span>    &lt;<span style="color: #a626a4;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Hello, world!</span>&lt;/<span style="color: #a626a4;">h1</span>&gt;
                <span class="linenr">6: </span>    &lt;<span style="color: #a626a4;">p</span> <span style="color: #6a1868;">style</span>=<span style="color: #50a14f;">"display: none;"</span>&gt;How are you?&lt;/<span style="color: #a626a4;">p</span>&gt;
                <span class="linenr">7: </span>  &lt;/<span style="color: #a626a4;">body</span>&gt;
                <span class="linenr">8: </span>&lt;/<span style="color: #a626a4;">html</span>&gt;
              </pre>
            </div>

            <p>
              The DOM will include the <code>&lt;p&gt;</code> element:
            </p>

            <img
              src="/images/vdom-4.png"
              width="250"
              height=""
              style=""
              title="DOM"
              />

            <img
              src="/images/vdom-5.png"
              width="200"
              height=""
              style="float: right; margin-left: 8px; border: 3px solid #acf;"
              title="render tree"
              />

            <p>
              However, the render tree, and therefore what is seen in the viewport, will not include that element.
            </p>

            <p>
              <b>3.The DOM is not what is in DevTools</b>
            </p>

            <p>
              This differentce is a bit more minuscule because the DevTools element inspector provides the closest approximation to the DOM that we have in the browser. However, the DevTools inspector includes addtional information that isn't in the DOM.
            </p>

            <p>
              The best example of this is CSS pseudo-elements. Pseudo-elements created using the <code>::before</code> and <code>::after</code> selectors form part of the CSSOM and render tree, but are not technically part of the DOM. This is because the DOM is built from the source HTML document alone, not including the styles applied to the element.
            </p>

            <p>
              Despite the fact that pseudo-elements are not part of the DOM, they are in our devtools element inspector.
            </p>

            <img
              src="/images/vdom-6.png"
              width="800"
              height=""
              style=""
              title=""
              />

            <p>
              This is why pseudo-elements cannot be targetted by JavaScript, because they are not part of the DOM.
            </p>
          </div>
        </div>

        <div id="outline-container-org1f53352" class="outline-3">
          <h3 id="org1f53352">Recap</h3>
          <div class="outline-text-3" id="text-org1f53352">
            <p>
              The DOM is an interface to an HTML document. It is used by browsers as a first step towards determining what to render in the viewport, and by Javascript programs to modify the content, structure, or styling of the page.
            </p>

            <p>
              Although similar to other forms of the source HTML document, the DOM is different in a number of ways:
            </p>
            <ul class="org-ul">
              <li>It is always valid HTML</li>
              <li>It is a living model that can be modifed by Javascript</li>
              <li>It doesn't include pseudo-elements (e.g. ::after)</li>
              <li>It does include hidden elements (e.g. with display: none)</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="outline-container-org1c8b69f" class="outline-2">
        <h2 id="org1c8b69f">Understanding the Critical Rendering Path<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup></h2>
        <div class="outline-text-2" id="text-org1c8b69f">
          <p>
            When a browser receives the HTML response for a page from the server, there are lot of steps to be taken before pixels are drawn on the screen. This sequence the browser needs to run through for the initial paint of the page is called the <b>"Critical Rendering Path"</b>.
          </p>

          <blockquote>
            <p>
              *Tip: we will use CRP represent Critical Rendering Path.
            </p>
          </blockquote>

          <p>
            Knowledge of the CRP is incredibly useful for understanding how a site's performance can be improved. There are 6 stages to the CRP:
          </p>

          <pre class="example">
            1. Constructing the DOM Tree
            2. Construting the CSSOM Tree
            3. Running JavaScript
            4. Creating the Render Tree
            5. Generating the Layout
            6. Painting
          </pre>

          <img
            src="/images/vdom-7.png"
            width="760"
            height=""
            style=""
            title=""
            />
        </div>

        <div id="outline-container-org9d4e563" class="outline-3">
          <h3 id="org9d4e563">1.Constructing the DOM Tree</h3>
          <div class="outline-text-3" id="text-org9d4e563">
            <p>
              The DOM (Document Object Model) Tree is an Object representation of the fully parsed HTML page.
            </p>

            <p>
              Starting with the root element, <code>&lt;html&gt;</code>, nodes are created for each element/text on the page. Elements nested within other elements are represented as child nodes and each node contains the full attributes for that element. For example, an <code>&lt;a&gt;</code> element will have the <code>href</code> attribute associated with it's node.
            </p>

            <p>
              Take, for example, this sample document:
            </p>

            <div class="org-src-container">
              <pre class="src src-html"><span class="linenr"> 1: </span>&lt;<span style="color: #a626a4;">html</span>&gt;
                <span class="linenr"> 2: </span>&lt;<span style="color: #a626a4;">head</span>&gt;
                <span class="linenr"> 3: </span>  &lt;<span style="color: #a626a4;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Understanding the Critical Rendering Path</span>&lt;/<span style="color: #a626a4;">title</span>&gt;
                <span class="linenr"> 4: </span>  &lt;<span style="color: #a626a4;">link</span> <span style="color: #6a1868;">rel</span>=<span style="color: #50a14f;">"stylesheet"</span> <span style="color: #6a1868;">href</span>=<span style="color: #50a14f;">"style.css"</span>&gt;
                <span class="linenr"> 5: </span>&lt;/<span style="color: #a626a4;">head</span>&gt;
                <span class="linenr"> 6: </span>&lt;<span style="color: #a626a4;">body</span>&gt;
                <span class="linenr"> 7: </span>  &lt;<span style="color: #a626a4;">header</span>&gt;
                <span class="linenr"> 8: </span>      &lt;<span style="color: #a626a4;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Understanding the Critical Rendering Path</span>&lt;/<span style="color: #a626a4;">h1</span>&gt;
                <span class="linenr"> 9: </span>  &lt;/<span style="color: #a626a4;">header</span>&gt;
                <span class="linenr">10: </span>  &lt;<span style="color: #a626a4;">main</span>&gt;
                <span class="linenr">11: </span>      &lt;<span style="color: #a626a4;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">Introduction</span>&lt;/<span style="color: #a626a4;">h2</span>&gt;
                <span class="linenr">12: </span>      &lt;<span style="color: #a626a4;">p</span>&gt;Lorem ipsum dolor sit amet&lt;/<span style="color: #a626a4;">p</span>&gt;
                <span class="linenr">13: </span>  &lt;/<span style="color: #a626a4;">main</span>&gt;
                <span class="linenr">14: </span>  &lt;<span style="color: #a626a4;">footer</span>&gt;
                <span class="linenr">15: </span>      &lt;<span style="color: #a626a4;">small</span>&gt;<span style="color: #383a42; background-color: #fafafa;">Copyright 2017</span>&lt;/<span style="color: #a626a4;">small</span>&gt;
                <span class="linenr">16: </span>  &lt;/<span style="color: #a626a4;">footer</span>&gt;
                <span class="linenr">17: </span>&lt;/<span style="color: #a626a4;">body</span>&gt;
                <span class="linenr">18: </span>&lt;/<span style="color: #a626a4;">html</span>&gt;
              </pre>
            </div>

            <p>
              This will create the following DOM Tree:
            </p>

            <img
              src="/images/vdom-8.png"
              width="720"
              height=""
              style=""
              title=""
              />

            <p>
              A good thing about HTML is that it can be executed in parts. The full document doesn't have to be loaded for content to start appearing on the page. However, other resources, CSS and JavaScript, can block the render of the page.
            </p>
          </div>
        </div>

        <div id="outline-container-org9283849" class="outline-3">
          <h3 id="org9283849">2.Constructing the CSSOM Tree</h3>
          <div class="outline-text-3" id="text-org9283849">
            <p>
              The CSSOM (CSS Object Model) is an Object representation of the styles associated with the DOM. It is represented in a similar way to the DOM, but with the associated styles for each node, whether they explicitly declared or implicitly inherited, included.
            </p>

            <p>
              In the <code>style.css</code> file from the document mentioned above, we have the following styles:
            </p>

            <div class="org-src-container">
              <pre class="src src-css"><span class="linenr">1: </span><span style="color: #4078f2;">body </span><span style="color: #4078f2;">{</span> <span style="color: #50a14f;">font-size</span>: 18px; <span style="color: #4078f2;">}</span>
                <span class="linenr">2: </span>
                <span class="linenr">3: </span><span style="color: #4078f2;">header </span><span style="color: #4078f2;">{</span> <span style="color: #50a14f;">color</span>: <span style="color: #000000; background-color: #dda0dd;">plum</span>; <span style="color: #4078f2;">}</span>
                <span class="linenr">4: </span><span style="color: #4078f2;">h1 </span><span style="color: #4078f2;">{</span> <span style="color: #50a14f;">font-size</span>: 28px; <span style="color: #4078f2;">}</span>
                <span class="linenr">5: </span>
                <span class="linenr">6: </span><span style="color: #4078f2;">main </span><span style="color: #4078f2;">{</span> <span style="color: #50a14f;">color</span>: <span style="color: #ffffff; background-color: #b22222;">firebrick</span>; <span style="color: #4078f2;">}</span>
                <span class="linenr">7: </span><span style="color: #4078f2;">h2 </span><span style="color: #4078f2;">{</span> <span style="color: #50a14f;">font-size</span>: 20px; <span style="color: #4078f2;">}</span>
                <span class="linenr">8: </span>
                <span class="linenr">9: </span><span style="color: #4078f2;">footer </span><span style="color: #4078f2;">{</span> <span style="color: #50a14f;">display</span>: none; <span style="color: #4078f2;">}</span>
              </pre>
            </div>

            <p>
              This will create the following CSSOM Tree:
            </p>

            <img
              src="/images/vdom-9.png"
              width="720"
              height=""
              style=""
              title=""
              />

            <p>
              CSS is considered a <b>"render blocking resource"</b>. This means that the <a href="#org1c0e35c">Render Tree (see below)</a> cannot be constructed without first fully parsing the resource.
            </p>

            <p>
              Unlike HTML, CSS cannot be used in parts because of its inherit cascading nature. Styles defined later in the document can override and change styles that were previously defined. So, if we start using CSS styles defined earlier in the stylesheet before the entirety of the stylesheet has been parsed, we may get a situation where the wrong CSS is being applied.
            </p>

            <p>
              <b>This means that CSS must be fully parsed before we can move on to the next stage.</b>
            </p>

            <p>
              CSS files are only considered render blocking if they apply to the current device. The <code>&lt;link rel="stylesheet"&gt;</code> tag can accept a <code>media</code> attribute, in which we can specify any media query which the styles within apply to. If, for example, we have a stylesheet with a media attribute of <code>orientation: landscape</code>, and we are viewing the page in portrait mode, that resource will not be considered render blocking.
            </p>

            <p>
              CSS can also be <b>"script blocking"</b>. This is because JavaScript files must wait until the CSSOM has been constructed before it can run.
            </p>
          </div>
        </div>

        <div id="outline-container-org71e1c38" class="outline-3">
          <h3 id="org71e1c38">3.Running JavaScript</h3>
          <div class="outline-text-3" id="text-org71e1c38">
            <p>
              JavaScript is considered a <b>"parser blocking resource"</b>. This means that the parsing of the HTML document itself is blocked by JavaScript.
            </p>

            <p>
              When the parser reaches a <code>&lt;script&gt;</code> tag, whether that be internal or external, it stops to fetch (if it is external) and run it. This why, if we have a JavaScript file that references elements within the document, it must be placed after the appearance of that document.
            </p>

            <p>
              To avoid JavaScript being parse blocking, it can be loaded asynchronously be applying the <code>async</code> attribute.
            </p>

            <div class="org-src-container">
              <pre class="src src-html"><span class="linenr">1: </span>&lt;<span style="color: #a626a4;">script</span> async <span style="color: #6a1868;">src</span>=<span style="color: #50a14f;">"script.js"</span>&gt;&lt;/<span style="color: #a626a4;">script</span>&gt;
              </pre>
            </div>
          </div>
        </div>

        <div id="outline-container-org1c0e35c" class="outline-3">
          <h3 id="org1c0e35c">4.Creating the Render Tree</h3>
          <div class="outline-text-3" id="text-org1c0e35c">
            <p>
              The Render Tree is a combination of both the DOM and CSSOM. It is a Tree that represents what will be eventually rendered on the page. This means that it only captures the visible content and will not include, for example, elements that have been hidden with CSS using <code>display: none</code>.
            </p>

            <p>
              Using the example DOM and CSSOM above, the following Render Tree will be created:
            </p>

            <img
              src="/images/vdom-10.png"
              width="720"
              height=""
              style=""
              title=""
              />
          </div>
        </div>

        <div id="outline-container-orgda78bad" class="outline-3">
          <h3 id="orgda78bad">5.Generating the Layout</h3>
          <div class="outline-text-3" id="text-orgda78bad">
            <p>
              The Layout is what determines <b>what the size of the viewport is</b> , which provides context for CSS styles that are dependent on it, e.g. percentage or viewport units. The viewport size is determined by meta viewport tag provided in the document head or, if no tag is provided, the default viewport width of 980px is used.
            </p>

            <p>
              For example, the most common meta viewport value is to set the viewport size to correspond to the device width:
            </p>

            <div class="org-src-container">
              <pre class="src src-html"><span class="linenr">1: </span>&lt;<span style="color: #a626a4;">meta</span> <span style="color: #6a1868;">name</span>=<span style="color: #50a14f;">"viewport"</span> <span style="color: #6a1868;">content</span>=<span style="color: #50a14f;">"width=device-width,initial-scale=1"</span>&gt;
              </pre>
            </div>

            <p>
              If the user visits the webpage on a device with a width of, for example, 1000px, then sizes will be based on that unit. Half the viewport will be 500px, 10vw will be 100px, and so on.
            </p>
          </div>
        </div>

        <div id="outline-container-org88cd726" class="outline-3">
          <h3 id="org88cd726">6.Painting</h3>
          <div class="outline-text-3" id="text-org88cd726">
            <p>
              Finally, in the Painting step, the visible content of the page can be converted to pixels to be displayed on the screen.
            </p>

            <p>
              How much time the paint step takes depends on the size of the DOM, as well as what styles are applied. Some styles require more work to execute than others. For example, a complicated gradient background-image will require more time than a simple solid background colour.
            </p>
          </div>
        </div>

        <div id="outline-container-orgccee9b8" class="outline-3">
          <h3 id="orgccee9b8">Putting it All Together</h3>
          <div class="outline-text-3" id="text-orgccee9b8">
            <p>
              To see the Critical Rendering Path in process, we can inspect it in DevTools. In Chrome, it is under the <b>Timeline</b> tab (in Canary, and soon to be Chrome stable, it's renamed <b>Performance</b>).
            </p>

            <p>
              Take for example, our sample HTML from above (width an added <code>&lt;script&gt;</code> tag):
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr"> 1: </span>&lt;html&gt;
                <span class="linenr"> 2: </span>&lt;head&gt;
                <span class="linenr"> 3: </span>  &lt;title&gt;Understanding the Critical Rendering Path&lt;/title&gt;
                <span class="linenr"> 4: </span>  &lt;link rel=<span style="color: #50a14f;">"stylesheet"</span> href=<span style="color: #50a14f;">"style.css"</span>&gt;
                <span class="linenr"> 5: </span>&lt;/head&gt;
                <span class="linenr"> 6: </span>&lt;body&gt;
                <span class="linenr"> 7: </span>  &lt;header&gt;
                <span class="linenr"> 8: </span>      &lt;h1&gt;Understanding the Critical Rendering Path&lt;/h1&gt;
                <span class="linenr"> 9: </span>  &lt;/header&gt;
                <span class="linenr">10: </span>  &lt;main&gt;
                <span class="linenr">11: </span>      &lt;h2&gt;Introduction&lt;/h2&gt;
                <span class="linenr">12: </span>      &lt;p&gt;Lorem ipsum dolor sit amet&lt;/p&gt;
                <span class="linenr">13: </span>  &lt;/main&gt;
                <span class="linenr">14: </span>  &lt;footer&gt;
                <span class="linenr">15: </span>      &lt;small&gt;Copyright 2017&lt;/small&gt;
                <span class="linenr">16: </span>  &lt;/footer&gt;
                <span class="linenr">17: </span>  &lt;script src=<span style="color: #50a14f;">"main.js"</span>&gt;&lt;/script&gt;
                <span class="linenr">18: </span>&lt;/body&gt;
                <span class="linenr">19: </span>&lt;/html&gt;
              </pre>
            </div>

            <p>
              If we look at the Event Log for the page load, this is what we get:
            </p>

            <img
              src="/images/vdom-11.png"
              width="800"
              height=""
              style=""
              title=""
              />

            <ol class="org-ol">
              <li><b>Send Request</b> - GET request sent for index.html</li>
              <li><b>Parse HTML</b> and <b>Send Request</b> - Begin parsing of HTML and DOM construction. Send GET request for <code>style.css</code> and <code>main.js</code></li>
              <li><b>Parse Stylesheet</b> - CSSOM created for <code>style.css</code></li>
              <li><b>Evaluate Script</b> - Evaluate <code>main.js</code></li>
              <li><b>Layout</b> - Generate Layout based on meta viewport tag in HTML</li>
              <li><b>Paint</b> - Paint pixels on document</li>
            </ol>

            <p>
              Based on this information, we can make decisions on how to optimize the Critical Rendering Path. I will go into some of these techniques in later articles.
            </p>
          </div>
        </div>
      </div>

      <div id="outline-container-orgf3b7c83" class="outline-2">
        <h2 id="orgf3b7c83">Understanding the Virtual DOM<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup></h2>
        <div class="outline-text-2" id="text-orgf3b7c83">
          <p>
            I've recently been writing about what exactly the DOM and the shodow DOM are and how they differ.
          </p>

          <p>
            To recap, the Document Object Model is an object-based representation of an HTML document and an interface to mainpulating that object.
          </p>

          <p>
            The shadow DOM can be thought of as a "lite" version of the DOM. It is also an object-based representation of HTML elements, but not of a full standalone document. Instead, the shadow DOM allows us to separate our DOM into smaller, encapsulated bits that can be used across HTML documents.
          </p>

          <p>
            Another similar term you may have come across is the <b>"virtual DOM"</b>.
          </p>

          <p>
            Although the concep has been around for several years, it was made more popular by its use in the React framework. In this article, I will cover exactly what the virtual DOM is, how it differs from the original DOM, and how it it used.
          </p>
        </div>

        <div id="outline-container-org0fb382a" class="outline-3">
          <h3 id="org0fb382a">Why do we need a virtual DOM?</h3>
          <div class="outline-text-3" id="text-org0fb382a">
            <p>
              To understand why the concept of the virtual DOM arose, let's revisit the original DOM.
            </p>

            <p>
              As I mentioned, there are two parts to the DOM:
            </p>
            <ul class="org-ul">
              <li>the object-based representation of the HTML document, and</li>
              <li>the API to manipulating that object.</li>
            </ul>

            <p>
              For example, let's take this simple HTML document with an unordered list and one list item.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr">1: </span>&lt;!doctype html&gt;
                <span class="linenr">2: </span>&lt;html lang=<span style="color: #50a14f;">"en"</span>&gt;
                <span class="linenr">3: </span> &lt;head&gt;&lt;/head&gt;
                <span class="linenr">4: </span> &lt;body&gt;
                <span class="linenr">5: </span>    &lt;ul <span style="color: #e45649;">class</span>=<span style="color: #50a14f;">"list"</span>&gt;
                <span class="linenr">6: </span>        &lt;li <span style="color: #e45649;">class</span>=<span style="color: #50a14f;">"list__item"</span>&gt;List item&lt;/li&gt;
                <span class="linenr">7: </span>    &lt;/ul&gt;
                <span class="linenr">8: </span>  &lt;/body&gt;
                <span class="linenr">9: </span>&lt;/html&gt;
              </pre>
            </div>

            <p>
              This document can be represented as the following DOM tree:
            </p>

            <img
              src="/images/vdom-12.png"
              width="260"
              height=""
              style=""
              title=""
              />

            <p>
              Let's say we want to modify the content of the first list item to <b>"List item one"</b> and also add a second list item. To do this, we will need use the DOM APIs to find the elements we want to update, create the new elements, add attributes and content, then finally update the DOM elements themselves.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr">1: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">listItemOne</span> = document.getElementsByClassName<span style="color: #4078f2;">(</span><span style="color: #50a14f;">'list__item'</span><span style="color: #4078f2;">)[</span>0<span style="color: #4078f2;">]</span>
                <span class="linenr">2: </span>listItemOne.textContent = <span style="color: #50a14f;">'List item one'</span>
                <span class="linenr">3: </span>
                <span class="linenr">4: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">list</span> = document.getElementsByClassName<span style="color: #4078f2;">(</span><span style="color: #50a14f;">'list'</span><span style="color: #4078f2;">)[</span>0<span style="color: #4078f2;">]</span>
                <span class="linenr">5: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">listItemTwo</span> = document.createElement<span style="color: #4078f2;">(</span><span style="color: #50a14f;">'li'</span><span style="color: #4078f2;">)</span>
                <span class="linenr">6: </span>listItemTwo.classList.add<span style="color: #4078f2;">(</span><span style="color: #50a14f;">'list__item'</span><span style="color: #4078f2;">)</span>
                <span class="linenr">7: </span>listItemTwo.textContent = <span style="color: #50a14f;">'List item two'</span>
                <span class="linenr">8: </span>list.appendChild<span style="color: #4078f2;">(</span>listItemTwo<span style="color: #4078f2;">)</span>
              </pre>
            </div>

            <p>
              <b>The DOM wasn't made for this&#x2026;</b>
            </p>

            <p>
              When the first specification for the DOM was released in 1998, we built and managed web pages in very differently. There was far less reliance on the DOM APIs to create and update the page content as frequently as we do today.
            </p>

            <p>
              Simple methods such as <code>document.getElementsByClassName()</code> are fine to use on a small scale, but if we are updating muliple elements on a page every few seconds, it can start to become really expensive to constantly query and update the DOM.
            </p>

            <p>
              Even further, because of the way the APIs are setup, it is usually simpler to perform more expensive operations where we update larger parts of the doucment than to find and update the specific elements. Going back to our list example, it is in some ways easier to replace the entire unordered list with a new one than to modify the specific elements.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr">1: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">list</span> = document.getElementsByClassName<span style="color: #4078f2;">(</span><span style="color: #50a14f;">'list'</span><span style="color: #4078f2;">)[</span>0<span style="color: #4078f2;">]</span>
                <span class="linenr">2: </span>list.innerHTML = <span style="color: #50a14f;">`</span>
                <span class="linenr">3: </span><span style="color: #50a14f;">&lt;li class="list__item"&gt;List item one&lt;/li&gt;</span>
                <span class="linenr">4: </span><span style="color: #50a14f;">&lt;li class="list__item"&gt;List item two&lt;/li&gt;</span>
                <span class="linenr">5: </span><span style="color: #50a14f;">`</span>
              </pre>
            </div>

            <p>
              In this particular example, the performance difference between the methods is probably insignificant. However, as the size of the web page grows, it becomes more important to only select and update what is needed.
            </p>

            <p>
              <b>&#x2026;but the virtual DOM was!</b>
            </p>

            <p>
              The virtual DOM was created to solve these problems of needing to frequently update the DOM in a more performant way. Unlike the DOM or the shadow DOM, the virtual DOM isn't an official specification, but rather a new method of interfacing with the DOM.
            </p>

            <p>
              <b>A virtual DOM can be thought of as a copy of the original DOM.</b> This copy can be frequently manipulated and upated, without using the DOM APIs. Once all the updates have been made to the virtual DOM, we can look at what specific changes need to be made to the original DOM and make them in a targetted and optimised way.
            </p>
          </div>
        </div>

        <div id="outline-container-org3dd5165" class="outline-3">
          <h3 id="org3dd5165">What does a virtual DOM look like?</h3>
          <div class="outline-text-3" id="text-org3dd5165">
            <p>
              The name "virtual DOM" tends to add to the mystery of what the concept actually is. <b>In fact, a virtual DOM is just a regular JavaScript object.</b>
            </p>

            <p>
              Let's revisit the DOM tree we created earlier:
            </p>

            <img
              src="/images/vdom-12.png"
              width="260"
              height=""
              style=""
              title=""
              />

            <p>
              This tree can also be represented as a JavaScript object.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr"> 1: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">vdom</span> = <span style="color: #4078f2;">{</span>
                <span class="linenr"> 2: </span>    tagName: <span style="color: #50a14f;">'html'</span>,
                <span class="linenr"> 3: </span>    children: <span style="color: #a626a4;">[</span>
                <span class="linenr"> 4: </span>        <span style="color: #50a14f;">{</span> tagName: <span style="color: #50a14f;">'head'</span><span style="color: #50a14f;">}</span>,
                <span class="linenr"> 5: </span>        <span style="color: #50a14f;">{</span>
                <span class="linenr"> 6: </span>            tagName: <span style="color: #50a14f;">'body'</span>,
                <span class="linenr"> 7: </span>            children: <span style="color: #da8548;">[</span>
                <span class="linenr"> 8: </span>                <span style="color: #b751b6;">{</span>
                <span class="linenr"> 9: </span>                    tagName: <span style="color: #50a14f;">'ul'</span>,
                <span class="linenr">10: </span>                    attributes: <span style="color: #986801;">{</span> <span style="color: #e45649;">class</span>: <span style="color: #50a14f;">'list'</span> <span style="color: #986801;">}</span>,
                <span class="linenr">11: </span>                    children: <span style="color: #986801;">[</span>
                <span class="linenr">12: </span>                        <span style="color: #4db5bd;">{</span>
                <span class="linenr">13: </span>                            tagName: <span style="color: #50a14f;">'li'</span>,
                <span class="linenr">14: </span>                            attributes: <span style="color: #80a880;">{</span> <span style="color: #e45649;">class</span>: <span style="color: #50a14f;">'list__item'</span> <span style="color: #80a880;">}</span>,
                <span class="linenr">15: </span>                            textContent: <span style="color: #50a14f;">'List item'</span>
                <span class="linenr">16: </span>                        <span style="color: #4db5bd;">}</span>   <span style="color: #9ca0a4;">// </span><span style="color: #9ca0a4;">end li</span>
                <span class="linenr">17: </span>                    <span style="color: #986801;">]</span>
                <span class="linenr">18: </span>                <span style="color: #b751b6;">}</span>   <span style="color: #9ca0a4;">// </span><span style="color: #9ca0a4;">end ul</span>
                <span class="linenr">19: </span>            <span style="color: #da8548;">]</span>
                <span class="linenr">20: </span>        <span style="color: #50a14f;">}</span>   <span style="color: #9ca0a4;">// </span><span style="color: #9ca0a4;">end body</span>
                <span class="linenr">21: </span>    <span style="color: #a626a4;">]</span>
                <span class="linenr">22: </span><span style="color: #4078f2;">}</span>   <span style="color: #9ca0a4;">// </span><span style="color: #9ca0a4;">end html</span>
              </pre>
            </div>

            <p>
              We can think of this object as our virtual DOM. Like the original DOM, it is an object-based representation of our HTML document. But since it is a plain JavaScript object, we can manipulate it freely and frequently without touching the actual DOM until we need to.
            </p>

            <p>
              Instead of using one object for the entire object, it is more common to work with small sections of the virtual DOM. For example, we may work on a <b>list</b> component, which would corespond to our unordered list element.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr"> 1: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">list</span> = <span style="color: #4078f2;">{</span>
                <span class="linenr"> 2: </span>    tabName: <span style="color: #50a14f;">'ul'</span>,
                <span class="linenr"> 3: </span>    attributes: <span style="color: #a626a4;">{</span> <span style="color: #e45649;">class</span>: <span style="color: #50a14f;">'list'</span> <span style="color: #a626a4;">}</span>,
                <span class="linenr"> 4: </span>    children: <span style="color: #a626a4;">[</span>
                <span class="linenr"> 5: </span>        <span style="color: #50a14f;">{</span>
                <span class="linenr"> 6: </span>            tagName: <span style="color: #50a14f;">'li'</span>,
                <span class="linenr"> 7: </span>            attributes: <span style="color: #da8548;">{</span> <span style="color: #e45649;">class</span>: <span style="color: #50a14f;">'list__item'</span> <span style="color: #da8548;">}</span>,
                <span class="linenr"> 8: </span>            textContent: <span style="color: #50a14f;">'List item'</span>
                <span class="linenr"> 9: </span>        <span style="color: #50a14f;">}</span>
                <span class="linenr">10: </span>    <span style="color: #a626a4;">]</span>
                <span class="linenr">11: </span><span style="color: #4078f2;">}</span>
              </pre>
            </div>
          </div>
        </div>

        <div id="outline-container-org6ed4e62" class="outline-3">
          <h3 id="org6ed4e62">Under the hood of the virtual DOM</h3>
          <div class="outline-text-3" id="text-org6ed4e62">
            <p>
              Now that we've seen what a virtual DOM looks like, how does it work to solve the performance and usability problems of the DOM?
            </p>

            <p>
              As I mentioned, we can use the virtual DOM to single out the specific changes that need to be made to the DOM and make those specific updates alone. Let's go back to our unordered list example and make the same changes we did using the DOM API.
            </p>

            <p>
              The first thing we would do is make a copy of the virtual DOM, containing the changes we want to make. Since we don't need to use the DOM APIs, we can actually just create a new object alltogether.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr"> 1: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">copy</span> = <span style="color: #4078f2;">{</span>
                <span class="linenr"> 2: </span>    tagName: <span style="color: #50a14f;">'ul'</span>,
                <span class="linenr"> 3: </span>    attributes: <span style="color: #a626a4;">{</span> <span style="color: #e45649;">class</span>: <span style="color: #50a14f;">'list'</span> <span style="color: #a626a4;">}</span>,
                <span class="linenr"> 4: </span>    children: <span style="color: #a626a4;">[</span>
                <span class="linenr"> 5: </span>        <span style="color: #50a14f;">{</span>
                <span class="linenr"> 6: </span>            tagName: <span style="color: #50a14f;">'li'</span>,
                <span class="linenr"> 7: </span>            attributes: <span style="color: #da8548;">{</span> <span style="color: #e45649;">class</span>: <span style="color: #50a14f;">'list__item'</span> <span style="color: #da8548;">}</span>,
                <span class="linenr"> 8: </span>            textContent: <span style="color: #50a14f;">'List item one'</span>
                <span class="linenr"> 9: </span>        <span style="color: #50a14f;">}</span>,
                <span class="linenr">10: </span>        <span style="color: #50a14f;">{</span>
                <span class="linenr">11: </span>            tagName: <span style="color: #50a14f;">'li'</span>,
                <span class="linenr">12: </span>            attributes: <span style="color: #da8548;">{</span> <span style="color: #e45649;">class</span>: <span style="color: #50a14f;">'list__item'</span> <span style="color: #da8548;">}</span>,
                <span class="linenr">13: </span>            textContent: <span style="color: #50a14f;">'List item two'</span>
                <span class="linenr">14: </span>        <span style="color: #50a14f;">}</span>
                <span class="linenr">15: </span>    <span style="color: #a626a4;">]</span>
                <span class="linenr">16: </span><span style="color: #4078f2;">}</span>
              </pre>
            </div>

            <p>
              This <b>copy</b> is used to create what is called a "diff" between the original virtual DOM, in this case the <b>list</b> , and the updated one. A diff could look something like this:
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr"> 1: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">diffs</span> = <span style="color: #4078f2;">[</span>
                <span class="linenr"> 2: </span>    <span style="color: #a626a4;">{</span>
                <span class="linenr"> 3: </span>        newNode: <span style="color: #50a14f;">{</span> <span style="color: #9ca0a4;">/* </span><span style="color: #9ca0a4;">new version of list item one */</span> <span style="color: #50a14f;">}</span>,
                <span class="linenr"> 4: </span>        oldNode: <span style="color: #50a14f;">{</span> <span style="color: #9ca0a4;">/* </span><span style="color: #9ca0a4;">original version of list item one */</span> <span style="color: #50a14f;">}</span>,
                <span class="linenr"> 5: </span>        index: <span style="color: #9ca0a4;">/* </span><span style="color: #9ca0a4;">index of element in parent's list of child nodes */</span>
                <span class="linenr"> 6: </span>    <span style="color: #a626a4;">}</span>,
                <span class="linenr"> 7: </span>    <span style="color: #a626a4;">{</span>
                <span class="linenr"> 8: </span>        newNode: <span style="color: #50a14f;">{</span> <span style="color: #9ca0a4;">/* </span><span style="color: #9ca0a4;">list item two */</span> <span style="color: #50a14f;">}</span>,
                <span class="linenr"> 9: </span>        index: <span style="color: #50a14f;">{</span> <span style="color: #9ca0a4;">/* </span><span style="color: #9ca0a4;">*/</span> <span style="color: #50a14f;">}</span>
                <span class="linenr">10: </span>    <span style="color: #a626a4;">}</span>
                <span class="linenr">11: </span><span style="color: #4078f2;">]</span>
              </pre>
            </div>

            <p>
              This diff provides instructions for how to update the actual DOM. Once all the diffs are collected, we can batch changes to the DOM, making only the updates that are needed.
            </p>

            <p>
              For example we could loop through each diff and either add a new child or update an old one depending on what the diff specifies.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr"> 1: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">domElement</span> = document.getElementsByClassName<span style="color: #4078f2;">(</span><span style="color: #50a14f;">'list'</span><span style="color: #4078f2;">)[</span>0<span style="color: #4078f2;">]</span>
                <span class="linenr"> 2: </span>
                <span class="linenr"> 3: </span>diffs.forEach<span style="color: #4078f2;">(</span><span style="color: #a626a4;">(</span>diff<span style="color: #a626a4;">)</span> =&gt; <span style="color: #a626a4;">{</span>
                <span class="linenr"> 4: </span>
                <span class="linenr"> 5: </span>    cosnt newElement = document.createElement<span style="color: #50a14f;">(</span>diff.newNode.tagName<span style="color: #50a14f;">)</span>
                <span class="linenr"> 6: </span>    <span style="color: #9ca0a4;">/* </span><span style="color: #9ca0a4;">Add attributes ... */</span>
                <span class="linenr"> 7: </span>
                <span class="linenr"> 8: </span>    <span style="color: #e45649;">if</span> <span style="color: #50a14f;">(</span>diff.oldNode<span style="color: #50a14f;">)</span> <span style="color: #50a14f;">{</span>
                <span class="linenr"> 9: </span>        <span style="color: #9ca0a4;">// </span><span style="color: #9ca0a4;">If there is an old version, replace it with the new version</span>
                <span class="linenr">10: </span>        domElement.replaceChild<span style="color: #da8548;">(</span>diff.newNode, diff.index<span style="color: #da8548;">)</span>
                <span class="linenr">11: </span>
                <span class="linenr">12: </span>    <span style="color: #50a14f;">}</span> <span style="color: #e45649;">else</span> <span style="color: #50a14f;">{</span>
                <span class="linenr">13: </span>        <span style="color: #9ca0a4;">// </span><span style="color: #9ca0a4;">if no old version exists, create a new node</span>
                <span class="linenr">14: </span>        domElement.appendChild<span style="color: #da8548;">(</span>diffNode<span style="color: #da8548;">)</span>
                <span class="linenr">15: </span>    <span style="color: #50a14f;">}</span>
                <span class="linenr">16: </span><span style="color: #a626a4;">}</span><span style="color: #4078f2;">)</span>
              </pre>
            </div>

            <p>
              Note that this is a really simplified and stripped-back version of how a virtual DOM could work and there are lot of cases I didn't cover here.
            </p>
          </div>
        </div>

        <div id="outline-container-org03dd4e7" class="outline-3">
          <h3 id="org03dd4e7">The virtual DOM and frameworks</h3>
          <div class="outline-text-3" id="text-org03dd4e7">
            <p>
              It's more common to work with the virtual DOM via a framework, rather than interfacing with it directly as I showed in the example above.
            </p>

            <p>
              Frameworks such as React and Vue use the virtual DOM concept to make more performant updates to the DOM. For example, our <b>list</b> component can be written in React in the following way.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr">1: </span><span style="color: #e45649;">import</span> React from <span style="color: #50a14f;">'react'</span>
                <span class="linenr">2: </span><span style="color: #e45649;">import</span> ReactDOM from <span style="color: #50a14f;">'react-dom'</span>
                <span class="linenr">3: </span>
                <span class="linenr">4: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">list</span> = React.createElement<span style="color: #4078f2;">(</span>
                <span class="linenr">5: </span>    <span style="color: #50a14f;">'ul'</span>, <span style="color: #a626a4;">{</span> className: <span style="color: #50a14f;">'list'</span> <span style="color: #a626a4;">}</span>,
                <span class="linenr">6: </span>     React.createElement<span style="color: #a626a4;">(</span><span style="color: #50a14f;">'li'</span>, <span style="color: #50a14f;">{</span> className: <span style="color: #50a14f;">'list__item'</span> <span style="color: #50a14f;">}</span>, <span style="color: #50a14f;">'List item'</span><span style="color: #a626a4;">)</span>
                <span class="linenr">7: </span><span style="color: #4078f2;">)</span>
                <span class="linenr">8: </span>
                <span class="linenr">9: </span>ReactDOM.render<span style="color: #4078f2;">(</span>list, document.body<span style="color: #4078f2;">)</span>
              </pre>
            </div>

            <p>
              If we wanted to update our list, we could just rewrite the entire list template, and call <code>ReactDOM.render()</code> again, passing in the new list.
            </p>

            <div class="org-src-container">
              <pre class="src src-js"><span class="linenr">1: </span><span style="color: #e45649;">const</span> <span style="color: #6a1868;">newList</span> = React.createElement<span style="color: #4078f2;">(</span>
                <span class="linenr">2: </span>    <span style="color: #50a14f;">'ul'</span>, <span style="color: #a626a4;">{</span> className: <span style="color: #50a14f;">'list'</span> <span style="color: #a626a4;">}</span>,
                <span class="linenr">3: </span>    React.createElement<span style="color: #a626a4;">(</span><span style="color: #50a14f;">'li'</span>, <span style="color: #50a14f;">{</span> className: <span style="color: #50a14f;">'list__item'</span> <span style="color: #50a14f;">}</span>, <span style="color: #50a14f;">'List item one'</span><span style="color: #a626a4;">)</span>,
                <span class="linenr">4: </span>    React.createElement<span style="color: #a626a4;">(</span><span style="color: #50a14f;">'li'</span>, <span style="color: #50a14f;">{</span> className: <span style="color: #50a14f;">'list__item'</span> <span style="color: #50a14f;">}</span>, <span style="color: #50a14f;">'List item two'</span><span style="color: #a626a4;">)</span>
                <span class="linenr">5: </span><span style="color: #4078f2;">)</span>
                <span class="linenr">6: </span>
                <span class="linenr">7: </span>setTimeout<span style="color: #4078f2;">(</span><span style="color: #a626a4;">()</span> =&gt; ReactDOM.render<span style="color: #a626a4;">(</span>newList, document.body<span style="color: #a626a4;">)</span>, 5000<span style="color: #4078f2;">)</span>
              </pre>
            </div>

            <p>
              Because React uses the virtual DOM, even though we are re-rendering the entire template, only the parts that actually change are updated. If we look at our developer tools when the change happens, we will see the specific elements and the specific parts of the elements that change.
            </p>
          </div>
        </div>

        <div id="outline-container-org1b0f244" class="outline-3">
          <h3 id="org1b0f244">The DOM vs the virtual DOM</h3>
          <div class="outline-text-3" id="text-org1b0f244">
            <p>
              To recap, the virtual DOM is a tool that enables us to interface with DOM elements in an easier and more performant way. It is a JavaScript object representation of the DOM, which we can modify as frequently as we need to. Changes made to this object are then collated, and modifications to the actual DOM are targetted and made less often.
            </p>
          </div>
        </div>
      </div>
      <div id="footnotes">
        <h2 class="footnotes">Footnotes: </h2>
        <div id="text-footnotes">

          <div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
                <a href="https://bitsofco.de/what-exactly-is-the-dom/">https://bitsofco.de/what-exactly-is-the-dom/</a>
          </p></div></div>

          <div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
                <a href="https://bitsofco.de/understanding-the-critical-rendering-path/">https://bitsofco.de/understanding-the-critical-rendering-path/</a>
          </p></div></div>

          <div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
                <a href="https://bitsofco.de/understanding-the-virtual-dom/">https://bitsofco.de/understanding-the-virtual-dom/</a>
          </p></div></div>

        </div>
    </div></div>
    <div id="postamble" class="status">
      <p class="date">Date: 2020-12-02 Wed 16:14</p>
      <p class="author">Author: Jack Liu</p>
      <p class="date">Created: 2021-02-23 Tue 11:12</p>
      <p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
    </div>
  </body>
</html>
