#+DATE: <2021-07-19 Mon 09:50>
#+TITLE: Tutor

→ [[./org-to-site-tutor.org][历史说明文档]]

* 简介

一款基于 =Org mode= 的静态博客生成工具。它以 =org-publish= 为核心，配合一套简约、有效的主题，方便日常记录和知识积累。

* 快速上手

*建议使用 git-bash 进行终端操作

#+BEGIN_SRC sh -n
  # 进入家目录
  cd ~/AppData/Roaming/

  # 克隆 emacs 配置
  # *注意做好个人的 emacs 配置的备份
  git clone https://github.com/loveminimal/emacs.d.git .emacs.d

  # 克隆网站主题
  git clone https://github.com/loveminimal/loveminimal.github.io.git site
  cd site
  git checkout -b source origin/source # 克隆源码 source 分支
#+END_SRC

启动 emacs 后，打开 =~/site/org/index.org= 文件， =M-x= 执行 =preview-current-buffer-in-browser= 命令，就可以预览页面效果。

#+BEGIN_QUOTE
*当然，也可以直接访问线上 [[https://ovirgo.com][个人站点]] 。
#+END_QUOTE

* 入门篇

** 环境准备

#+BEGIN_SRC sh -n
  jack@jk:~$ emacs --version
  GNU Emacs 26.3

  jack@jk:~$ git --version
  git version 2.31.1.windows.1
#+END_SRC

以上为个人桌面环境及软件版本，理论上只要版本跨度不大，就不存在兼容性问题。至于 Emacs 和 Git 的安装，请自行查询，此处不再赘述。

** 基本使用

入手使用是非常简单的，你只需要编辑 =*.org= 文件，在保存后，会在 =~/site/public= 中生成对应的 =*.html= 文件。

比如，我们使用 emacs 编辑 =~/site/org/index.org= （事实上，我们的主页就是这个文件生成的）， =M-x= 执行 =preview-current-buffer-in-browser= 命令，就可以预览首页效果。

是的， =~/site/public= 文件夹中的内容，就是我们在服务器部署站点时的全部所需文件。比如，我们的站点就是部署在 [[https://github.com/loveminimal/loveminimal.github.io/tree/master][loveminimal.github.io]] 上的（Hmm..褥 Github 羊毛 😄），可以看到，它就是 =public= 中的内容。

* 进阶篇

** 扩展准备

#+BEGIN_SRC sh -n
  jack@jk:~$ node -v
  v12.22.1
  jack@jk:~$ npm -v
  6.14.12

  # 一个更便捷的响应式服务器（实时更新）
  jack@jk:~$ live-server -v
  live-server 1.2.1
#+END_SRC

** 安装配置

#+BEGIN_EXPORT html
<div class="jk-essay">
<code>live-server</code> 的安装是可选的，完全可以使用 Emacs 配置文件中已经包含的 <code>simple-httpd</code> 服务器插件进行预览。但实际实用过程中，还是建议使用 <code>live-server</code> ，它会根据文件变动实时更新，也方便进行二次扩展和自定义。
</div>
#+END_EXPORT

下面我们主要来看一下 =live-server= 的安装及相关配置：

#+BEGIN_SRC sh -n
  npm i -g live-server            # 全局安装 live-server

  # 创建 live-server 的配置文件
  cd ~
  touch .live-server.json
#+END_SRC

关于 =.live-server.json= 的内容，如下：

#+BEGIN_SRC json -n
  {
      "port": 6600,
      "host": "127.0.0.1",
      "root": "/public",
      "open": true,
      "file": "index.html"
  }
#+END_SRC

*如何启动 =live-server= 呢？*

可以直接执行 ~cd ~/AppData/Roaming/site && live-server --open=public"~ 命令启动服务器，并打开浏览器。

为了方便在 Windows 系统上启动服务，你也可以创建一个 =server.bat= 脚本，其内容如下：

#+BEGIN_SRC bat -n
  @echo off
  %1(start /min cmd.exe /c %0 :& exit )
  echo Start your site server...
  echo -------------------------
  :: pause
  cd C:\Users\jack\AppData\Roaming\site
  live-server --open=public
#+END_SRC

如此，每次只需要双击打开运行这个脚本就可以了，上述两种方式的效果是相同的。
