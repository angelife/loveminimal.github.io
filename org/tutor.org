#+DATE: <2021-07-19 Mon 09:50>
#+TITLE: Tutor

â†’ [[./org-to-site-tutor.org][å†å²è¯´æ˜æ–‡æ¡£]]

* ç®€ä»‹

ä¸€æ¬¾åŸºäº =Org mode= çš„é™æ€åšå®¢ç”Ÿæˆå·¥å…·ã€‚å®ƒä»¥ =org-publish= ä¸ºæ ¸å¿ƒï¼Œé…åˆä¸€å¥—ç®€çº¦ã€æœ‰æ•ˆçš„ä¸»é¢˜ï¼Œæ–¹ä¾¿æ—¥å¸¸è®°å½•å’ŒçŸ¥è¯†ç§¯ç´¯ã€‚

* å¿«é€Ÿä¸Šæ‰‹

*å»ºè®®ä½¿ç”¨ git-bash è¿›è¡Œç»ˆç«¯æ“ä½œ

#+BEGIN_SRC sh -n
  # è¿›å…¥å®¶ç›®å½•
  cd ~/AppData/Roaming/

  # å…‹éš† emacs é…ç½®
  # *æ³¨æ„åšå¥½ä¸ªäººçš„ emacs é…ç½®çš„å¤‡ä»½
  git clone https://github.com/loveminimal/emacs.d.git .emacs.d

  # å…‹éš†ç½‘ç«™ä¸»é¢˜
  git clone https://github.com/loveminimal/loveminimal.github.io.git site
  cd site
  git checkout -b source origin/source # å…‹éš†æºç  source åˆ†æ”¯
#+END_SRC

å¯åŠ¨ emacs åï¼Œæ‰“å¼€ =~/site/org/index.org= æ–‡ä»¶ï¼Œ =M-x= æ‰§è¡Œ =preview-current-buffer-in-browser= å‘½ä»¤ï¼Œå°±å¯ä»¥é¢„è§ˆé¡µé¢æ•ˆæœã€‚

#+BEGIN_QUOTE
*å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®çº¿ä¸Š [[https://ovirgo.com][ä¸ªäººç«™ç‚¹]] ã€‚
#+END_QUOTE

* å…¥é—¨ç¯‡

** ç¯å¢ƒå‡†å¤‡

#+BEGIN_SRC sh -n
  jack@jk:~$ emacs --version
  GNU Emacs 26.3

  jack@jk:~$ git --version
  git version 2.31.1.windows.1
#+END_SRC

ä»¥ä¸Šä¸ºä¸ªäººæ¡Œé¢ç¯å¢ƒåŠè½¯ä»¶ç‰ˆæœ¬ï¼Œç†è®ºä¸Šåªè¦ç‰ˆæœ¬è·¨åº¦ä¸å¤§ï¼Œå°±ä¸å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚è‡³äº Emacs å’Œ Git çš„å®‰è£…ï¼Œè¯·è‡ªè¡ŒæŸ¥è¯¢ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚

** åŸºæœ¬ä½¿ç”¨

å…¥æ‰‹ä½¿ç”¨æ˜¯éå¸¸ç®€å•çš„ï¼Œä½ åªéœ€è¦ç¼–è¾‘ =*.org= æ–‡ä»¶ï¼Œåœ¨ä¿å­˜åï¼Œä¼šåœ¨ =~/site/public= ä¸­ç”Ÿæˆå¯¹åº”çš„ =*.html= æ–‡ä»¶ã€‚

æ¯”å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ emacs ç¼–è¾‘ =~/site/org/index.org= ï¼ˆäº‹å®ä¸Šï¼Œæˆ‘ä»¬çš„ä¸»é¡µå°±æ˜¯è¿™ä¸ªæ–‡ä»¶ç”Ÿæˆçš„ï¼‰ï¼Œ =M-x= æ‰§è¡Œ =preview-current-buffer-in-browser= å‘½ä»¤ï¼Œå°±å¯ä»¥é¢„è§ˆé¦–é¡µæ•ˆæœã€‚

æ˜¯çš„ï¼Œ =~/site/public= æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨æœåŠ¡å™¨éƒ¨ç½²ç«™ç‚¹æ—¶çš„å…¨éƒ¨æ‰€éœ€æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬çš„ç«™ç‚¹å°±æ˜¯éƒ¨ç½²åœ¨ [[https://github.com/loveminimal/loveminimal.github.io/tree/master][loveminimal.github.io]] ä¸Šçš„ï¼ˆHmm..è¤¥ Github ç¾Šæ¯› ğŸ˜„ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå®ƒå°±æ˜¯ =public= ä¸­çš„å†…å®¹ã€‚

* è¿›é˜¶ç¯‡

** æ‰©å±•å‡†å¤‡

#+BEGIN_SRC sh -n
  jack@jk:~$ node -v
  v12.22.1
  jack@jk:~$ npm -v
  6.14.12

  # ä¸€ä¸ªæ›´ä¾¿æ·çš„å“åº”å¼æœåŠ¡å™¨ï¼ˆå®æ—¶æ›´æ–°ï¼‰
  jack@jk:~$ live-server -v
  live-server 1.2.1
#+END_SRC

** å®‰è£…é…ç½®

#+BEGIN_EXPORT html
<div class="jk-essay">
<code>live-server</code> çš„å®‰è£…æ˜¯å¯é€‰çš„ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ Emacs é…ç½®æ–‡ä»¶ä¸­å·²ç»åŒ…å«çš„ <code>simple-httpd</code> æœåŠ¡å™¨æ’ä»¶è¿›è¡Œé¢„è§ˆã€‚ä½†å®é™…å®ç”¨è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨ <code>live-server</code> ï¼Œå®ƒä¼šæ ¹æ®æ–‡ä»¶å˜åŠ¨å®æ—¶æ›´æ–°ï¼Œä¹Ÿæ–¹ä¾¿è¿›è¡ŒäºŒæ¬¡æ‰©å±•å’Œè‡ªå®šä¹‰ã€‚
</div>
#+END_EXPORT

ä¸‹é¢æˆ‘ä»¬ä¸»è¦æ¥çœ‹ä¸€ä¸‹ =live-server= çš„å®‰è£…åŠç›¸å…³é…ç½®ï¼š

#+BEGIN_SRC sh -n
  npm i -g live-server            # å…¨å±€å®‰è£… live-server

  # åˆ›å»º live-server çš„é…ç½®æ–‡ä»¶
  cd ~
  touch .live-server.json
#+END_SRC

å…³äº =.live-server.json= çš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼š

#+BEGIN_SRC json -n
  {
      "port": 6600,
      "host": "127.0.0.1",
      "root": "/public",
      "open": true,
      "file": "index.html"
  }
#+END_SRC

*å¦‚ä½•å¯åŠ¨ =live-server= å‘¢ï¼Ÿ*

å¯ä»¥ç›´æ¥æ‰§è¡Œ ~cd ~/AppData/Roaming/site && live-server --open=public"~ å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ï¼Œå¹¶æ‰“å¼€æµè§ˆå™¨ã€‚

ä¸ºäº†æ–¹ä¾¿åœ¨ Windows ç³»ç»Ÿä¸Šå¯åŠ¨æœåŠ¡ï¼Œä½ ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ª =server.bat= è„šæœ¬ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š

#+BEGIN_SRC bat -n
  @echo off
  %1(start /min cmd.exe /c %0 :& exit )
  echo Start your site server...
  echo -------------------------
  :: pause
  cd C:\Users\jack\AppData\Roaming\site
  live-server --open=public
#+END_SRC

å¦‚æ­¤ï¼Œæ¯æ¬¡åªéœ€è¦åŒå‡»æ‰“å¼€è¿è¡Œè¿™ä¸ªè„šæœ¬å°±å¯ä»¥äº†ï¼Œä¸Šè¿°ä¸¤ç§æ–¹å¼çš„æ•ˆæœæ˜¯ç›¸åŒçš„ã€‚
